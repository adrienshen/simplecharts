!function(){function e(e){return!isNaN(parseFloat(e))&&isFinite(e)}function t(){var e=$("#datasets .form-control");$.each(e,function(e,t){var a=t.value.split(",");a.length>B&&(B=a.length)}),D=defaultLabels.slice(0,B)}function a(e,t){var a=z[""+e];$(".error-message"+t).text(a).removeClass("hidden"),console.log("yes!")}function o(){$(".error-message1").addClass("hidden"),$(".error-message2").addClass("hidden")}function n(e){var t=$(".type-title");t.html(e)}function l(){s(),h(),i(),r()}function i(){T=new Chart(L).Line(U,K)}function r(){I.on("click",g),$("#submit-data2").on("click",g),Z.on("click",k),j.on("click",C),$("span.chart-type").on("click",c),$("select#mobile-nav").on("change",d),$("#add-slice").on("click",v),$("#rm-slice").on("click",b)}function s(){$("<select />",{id:"mobile-nav"}).prependTo("#type-select"),$("span.chart-type a").each(function(){var e=$(this);$("<option />",{value:e.attr("href"),text:e.text()}).appendTo("#type-select select")})}function c(e,t){e.preventDefault();var a=$(this),o=$(window).width();if(o>600){console.log(A.width());var l=a.attr("data-type").toString()}if("line"===l||"bar"===l||"radar"===l||"Line"===t||"Bar"===t||"Radar"===t)H.addClass("type-hidden"),F.removeClass("type-hidden");else{H.removeClass("type-hidden"),F.addClass("type-hidden");for(var i=U.datasets.length-2,r=i;r>0;--r)C()}$("div#switch-options").empty(),"line"===l||"Line"===t?(n("Line Graph"),R=[{optionName:"scaleShowGridLines",optionText:"gridlines",checked:!0},{optionName:"bezierCurve",optionText:"bezier curves",checked:!0},{optionName:"datasetFill",optionText:"color fill",checked:!0},{optionName:"pointDot",optionText:"grid dots",checked:!0}],p()):"bar"===l||"Bar"===t?(n("Bar Graph"),R=[{optionName:"scaleShowGridLines",optionText:"gridlines",checked:!0},{optionName:"scaleBeginAtZero",optionText:"scale zero",checked:!0}],p()):"radar"===l||"Radar"===t?(n("Radar Graph"),R=[{optionName:"scaleShowLine",optionText:"scale lines",checked:!0},{optionName:"angleShowLineOut",optionText:"angle lines",checked:!0},{optionName:"scaleShowLabels",optionText:"scale labels",checked:!0},{optionName:"pointDot",optionText:"dot points",checked:!0},{optionName:"datasetStroke",optionText:"dataset strokes",checked:!0},{optionName:"datasetFill",optionText:"dataset fill",checked:!0}],p()):"pie"===l||"Pie"===t||"donut"===l||"Doughnut"===t?(("pie"===l||"Pie"===t)&&n("Pie Graph"),("donut"===l||"Doughnut"===t)&&n("Doughnut Graph"),R=[{optionName:"segmentShowStroke",optionText:"segment stroke",checked:!0},{optionName:"animateRotate",optionText:"animate rotate",checked:!1},{optionName:"animateScale",optionText:"animate scale",checked:!1}],p()):(n("Polar Graph"),R=[{optionName:"scaleShowLabelBackdrop",optionText:"scale backdrop",checked:!0},{optionName:"scaleBeginAtZero",optionText:"scale zero",checked:!0},{optionName:"scaleShowLine",optionText:"scale line",checked:!0},{optionName:"segmentShowStroke",optionText:"segment stroke",checked:!0},{optionName:"animateRotate",optionText:"animate rotate",checked:!1},{optionName:"animateScale",optionText:"animate scale",checked:!1}],p()),P="polar"===l||"Polar"===t?"PolarArea":a.text().toString()||t}function d(){var e=$("select option:selected").text();c(e)}function p(){for(var e=0;e<R.length;++e)$("<input></input>").attr({"class":"switch",id:R[e].optionName,type:"checkbox"}).prop("checked",R[e].checked).appendTo(q),$("<label></label>").attr({"class":"switch","for":R[e].optionName}).text(R[e].optionText).appendTo(q)}function h(){$(".color-select").spectrum({showPaletteOnly:!0,showPalette:!0,color:"rgba(255, 255, 255, .5)",palette:[["rgba(57, 106, 177, 1)","rgba(218, 124, 48, 1)","rgba(62, 150, 81, 1)","rgba(204, 37, 41, 1)","rgba(83, 81, 84, 1)","rgba(107, 76, 154, 1)","rgba(146, 36, 40, 1)","rgba(148, 139, 61, 1)"],["rgba(102,194,165, 1)","rgba(252,141,98, 1)","rgba(141,160,203, 1)","rgba(231,138,195, 1)","rgb(166,216,84, 1)","rgba(255,217,47, 1)","rgba(229,196,148, 1)","rgba(179,179,179, 1)"]]}),$(".color-select").removeClass("color-select").addClass("color-initialize")}function g(){L.clearRect(0,0,N,S),T&&T.clear().destroy(),o(),t(),"Line"===P||"Bar"===P||"Radar"===P?u():f(),T=new Chart(L)[P](U,K),T=new Chart(L)[P](J,K)}function u(){console.log("setting chart type 1");var t=$("#typeview1 .color-initialize");$.each(t,function(e,t){var o=t.value;return""===o?void a("color",1):(U.datasets[e].strokeColor=o,U.datasets[e].pointColor=o,U.datasets[e].pointHighlightStroke=o,o="rgba"+o.slice(3,o.length-1)+", 0.2)",void(U.datasets[e].fillColor=o))});var o=E.val().split(",");if(console.log(o.length+" "+B),""===E.val()||0===o.length)U.labels=D;else{if(o.length<B&&0!==o.length)return void a("label",1);U.labels=o}var n=$("#datasets .form-control");$.each(n,function(t,o){var n=o.value.split(",").map(function(e){return parseInt(e,10)});n.forEach(function(t,o,n){if(!e(t))throw a("wrong",1),new Error("input format error!")}),U.datasets[t].data=n}),m()}function f(){console.log("setting chart type 2");var e=$(".data-slices");$.each(e,function(e,t){var o=$(t).find(".labels").val(),n=$(t).find(".slice-data").val(),l=$(t).find(".color-initialize").val().toString();return""===o||""===n?void a("empty",2):""===l?void a("color",2):(J[e].value=parseInt(n),J[e].color=l,J[e].highlight=l,void(J[e].label=o))}),m()}function m(){currentPageOptions=$("[type=checkbox]"),$.each(currentPageOptions,function(e,t){console.log(t.id),K[t.id]=t.checked,console.log(t.checked)})}function v(e){e.preventDefault();var t={value:0,color:"",highlight:"",label:""};if(J.length>12)return void console.log("limit reached");J.push(t),console.log(J.length);var a=$("<div>",{"class":"container data-slices col-6"}),o=$("<input>",{"class":"labels col-10",type:"text"}),n=$("<input>",{"class":"slice-data col-10",type:"number"}),l=$("<input>",{"class":"color-select color2"});a.append(o).append(n).append(l),$(".data-slices").last().after(a),h(),w()}function b(e){e.preventDefault(),J.length<2||(J.pop(),console.log(J.length),$(".data-slices").last().remove(),w())}function k(e){e.preventDefault();var t=U.datasets,a={label:"",fillColor:"rgba(220,220,220,0.2)",strokeColor:"rgba(220,220,220,1)",pointColor:"rgba(220,220,220,1)",pointStrokeColor:"#fff",pointHighlightFill:"#fff",pointHighlightStroke:"rgba(220,220,220,1)",data:[]};if(!(t.length>=G.datasetsAllowed)){t.push(a);var o=$("<div>",{id:"","class":"container af"}),n=$("<input />",{id:"","class":"form-control added-inputs"}),l=$("<input>",{"class":"color-select color1"});o.append(n).append(l),O.append(o),h(),y()}}function C(e){e&&e.preventDefault();var t=U.datasets;if(!(t.length<=2)){t.pop();var a=$("#datasets div.container").last();a.remove(),y()}}function y(){var e=U.datasets;e.length>2&&e.length<9&&(j.removeClass("hidden"),Z.removeClass("hidden")),2===e.length&&j.addClass("hidden"),9===e.length&&Z.addClass("hidden")}function w(){var e=$("#rm-slice"),t=$("#add-slice"),a=J;a.length>2&&a.length<13&&(e.removeClass("hidden"),t.removeClass("hidden")),2===a.length&&e.addClass("hidden"),12===a.length&&t.addClass("hidden")}function x(){var e=document.getElementById("generated-chart"),t=new Image;t.src=e.toDataURL("image/png");var a=$('<a download="simplechart.png"></a>');a.attr("href",t.src),a.append(t),$("#graph-output").empty().append(a)}var T,N=800,S=500,L=document.getElementById("generated-chart").getContext("2d");defaultLabels=["a,","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","x","y","z"];var D,P="Line",B=0,G={Graph:"Radar",datasetsAllowed:9},R=[],z={empty:"sorry, the datafields can not be empty, you can remove them if not neccesary",wrong:"sorry, the datafields accept only numbers seperated by a single comma",label:"sorry, not enough labels for the datasets",color:"sorry, please set colors for each data set"};Chart.defaults.global.responsive=!1,Chart.defaults.global.onAnimationComplete=x;var F=$("#typeview1"),H=$("#typeview2"),A=$("window"),I=$("#submit-data"),E=($("#dataset1"),$("#dataset2"),$("#xlabels")),O=$("#datasets"),Z=$("#add-ds"),j=$("#rm-ds"),q=$("#switch-options"),U={labels:["label1","label2","label3","label4","label5","label6"],datasets:[{label:"",fillColor:"rgba(220,220,220,0.2)",strokeColor:"rgba(220,220,220,1)",pointColor:"rgba(220,220,220,1)",pointStrokeColor:"#fff",pointHighlightFill:"#2ecc71",pointHighlightStroke:"rgba(220,220,220,1)",data:[]},{label:"",fillColor:"rgba(151,187,205,0.2)",strokeColor:"rgba(151,187,205,1)",pointColor:"rgba(151,187,205,1)",pointStrokeColor:"#fff",pointHighlightFill:"#2ecc71",pointHighlightStroke:"rgba(151,187,205,1)",data:[]}]},J=[{value:0,color:"",highlight:"",label:""},{value:0,color:"",highlight:"",label:""}],K={};return l(),{}}();
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm1ha2UtY2hhcnQuanMiXSwibmFtZXMiOlsiaXNOdW1iZXIiLCJuIiwiaXNOYU4iLCJwYXJzZUZsb2F0IiwiaXNGaW5pdGUiLCJwcmVwQXV0b0xhYmVscyIsImRjQXJyIiwiJCIsImVhY2giLCJpbmRleCIsIml0ZW0iLCJpdGVtQXJyIiwidmFsdWUiLCJzcGxpdCIsImxlbmd0aCIsImxvbmdlc3RBcnIiLCJhdXRvTGFiZWxzIiwiZGVmYXVsdExhYmVscyIsInNsaWNlIiwicHJpbnRFcnJvck1lc3NhZ2VzIiwiZXJyb3IiLCJ2aWV3IiwiZXJyb3JUZXh0IiwiZXJyb3JNZXNzYWdlcyIsInRleHQiLCJyZW1vdmVDbGFzcyIsImNvbnNvbGUiLCJsb2ciLCJjbGVhckVycm9ycyIsImFkZENsYXNzIiwiY2hhbmdlVGl0bGUiLCJ0eXBlIiwiJHRpdGxlIiwiaHRtbCIsImFwcEluaXQiLCJtb2JpbGVOYXYiLCJjb2xvclNlbGVjdG9yIiwiaW5pdGlhbFJlbmRlciIsImV2ZW50QmluZGluZ3MiLCJuZXdDaGFydCIsIkNoYXJ0IiwiY3R4IiwiTGluZSIsInRlbXBsYXRlRGF0YSIsInRlbXBsYXRlT3B0aW9ucyIsIiRzdWJtaXREYXRhIiwib24iLCJyZW5kZXJPblN1Ym1pdCIsIiRhZGREYXRhQnRuIiwiYWRkRGF0YVNldCIsIiRybURhdGFCdG4iLCJyZW1vdmVEYXRhU2V0IiwiY2hhcnRUeXBlQ29udHJvbGxlciIsIm1vYmlsZUNoYXJ0Q3RybCIsImFkZFNsaWNlIiwicmVtb3ZlU2xpY2UiLCJpZCIsInByZXBlbmRUbyIsIiRlbCIsInRoaXMiLCJhdHRyIiwiYXBwZW5kVG8iLCJlIiwibXQiLCJwcmV2ZW50RGVmYXVsdCIsIndpbmRvd1dpZHRoIiwid2luZG93Iiwid2lkdGgiLCIkd2luZG93IiwiJGNoYXJ0VHlwZUNsaWNrZWQiLCJ0b1N0cmluZyIsIiR2aWV3MiIsIiR2aWV3MSIsIm51bVNldHNBZGRlZCIsImRhdGFzZXRzIiwiaSIsImVtcHR5Iiwib3B0aW9uc0FyciIsIm9wdGlvbk5hbWUiLCJvcHRpb25UZXh0IiwiY2hlY2tlZCIsIndyaXRlT3B0aW9ucyIsImdyYXBodHlwZSIsIm1vYmlsZVR5cGUiLCJjbGFzcyIsInByb3AiLCIkb3B0aW9uc0NvbnRhaW5lciIsImZvciIsInNwZWN0cnVtIiwic2hvd1BhbGV0dGVPbmx5Iiwic2hvd1BhbGV0dGUiLCJjb2xvciIsInBhbGV0dGUiLCJjbGVhclJlY3QiLCJjYW52YXNXaWR0aCIsImNhbnZhc0hlaWdodCIsImNsZWFyIiwiZGVzdHJveSIsInNldENoYXJ0RGF0YSIsInNldENoYXJ0RGF0YTIiLCJ0ZW1wbGF0ZURhdGEyIiwiJHNlbGVjdGVkQ29sb3JzIiwidHRlbXAiLCJzdHJva2VDb2xvciIsInBvaW50Q29sb3IiLCJwb2ludEhpZ2hsaWdodFN0cm9rZSIsImZpbGxDb2xvciIsInhsYWJlbHNBcnIiLCIkeGxhYmVscyIsInZhbCIsImxhYmVscyIsImN1ckl0ZW0iLCJtYXAiLCJwYXJzZUludCIsImZvckVhY2giLCJlbCIsImFyciIsIkVycm9yIiwiZGF0YSIsInNldE9wdGlvbnMiLCIkc2xpY2VzIiwibGFiZWxWYWwiLCJmaW5kIiwiZGF0YVZhbCIsImNvbG9yVmFsIiwiaGlnaGxpZ2h0IiwibGFiZWwiLCJjdXJyZW50UGFnZU9wdGlvbnMiLCJldnQiLCJuZXdTbGljZSIsInB1c2giLCIkZGl2IiwiJGlucHV0TGFiZWwiLCIkaW5wdXREYXRhIiwiJGNvbG9yIiwiYXBwZW5kIiwibGFzdCIsImFmdGVyIiwiZGF0YUxpbmtzU3R5bGUyIiwicG9wIiwicmVtb3ZlIiwiZHNBcnIiLCJuZXdEUyIsInBvaW50U3Ryb2tlQ29sb3IiLCJwb2ludEhpZ2hsaWdodEZpbGwiLCJDb25maWdEZWZhdWx0cyIsImRhdGFzZXRzQWxsb3dlZCIsIiRkYXRhSW5wdXREaXYiLCIkZGF0YUlucHV0RWwiLCIkZGF0YUNvbG9yU2VsZWN0IiwiJGRhdGFzZXRzIiwiZGF0YUxpbmtzU3R5bGUiLCIkbGFzdERhdGFJbnB1dHMiLCJ0ZW1wcCIsIiRybVNsaWNlIiwiJGFkZFNsaWNlIiwiY2FudmFzVG9JbWFnZSIsImdyYXBoIiwiZG9jdW1lbnQiLCJnZXRFbGVtZW50QnlJZCIsImltYWdlIiwiSW1hZ2UiLCJzcmMiLCJ0b0RhdGFVUkwiLCIkZG93bmxvYWQiLCJnZXRDb250ZXh0IiwiR3JhcGgiLCJ3cm9uZyIsImRlZmF1bHRzIiwiZ2xvYmFsIiwicmVzcG9uc2l2ZSIsIm9uQW5pbWF0aW9uQ29tcGxldGUiXSwibWFwcGluZ3MiOiJDQWVBLFdBcUdBLFFBQUFBLEdBQUFDLEdBQ0EsT0FBQUMsTUFBQUMsV0FBQUYsS0FBQUcsU0FBQUgsR0FJQSxRQUFBSSxLQUNBLEdBQUFDLEdBQUFDLEVBQUEsMEJBRUFBLEdBQUFDLEtBQUFGLEVBQUEsU0FBQUcsRUFBQUMsR0FDQSxHQUFBQyxHQUFBRCxFQUFBRSxNQUFBQyxNQUFBLElBQ0FGLEdBQUFHLE9BQUFDLElBQ0FBLEVBQUFKLEVBQUFHLFVBS0FFLEVBQUFDLGNBQUFDLE1BQUEsRUFBQUgsR0FJQSxRQUFBSSxHQUFBQyxFQUFBQyxHQUNBLEdBQUFDLEdBQUFDLEVBQUEsR0FBQUgsRUFDQWIsR0FBQSxpQkFBQWMsR0FBQUcsS0FBQUYsR0FBQUcsWUFBQSxVQUFBQyxRQUFBQyxJQUFBLFFBR0EsUUFBQUMsS0FDQXJCLEVBQUEsbUJBQUFzQixTQUFBLFVBQ0F0QixFQUFBLG1CQUFBc0IsU0FBQSxVQUlBLFFBQUFDLEdBQUFDLEdBQ0EsR0FBQUMsR0FBQXpCLEVBQUEsY0FDQXlCLEdBQUFDLEtBQUFGLEdBU0EsUUFBQUcsS0FDQUMsSUFDQUMsSUFDQUMsSUFDQUMsSUFHQSxRQUFBRCxLQUNBRSxFQUFBLEdBQUFDLE9BQUFDLEdBQUFDLEtBQUFDLEVBQUFDLEdBR0EsUUFBQU4sS0FFQU8sRUFBQUMsR0FBQSxRQUFBQyxHQUNBeEMsRUFBQSxpQkFBQXVDLEdBQUEsUUFBQUMsR0FHQUMsRUFBQUYsR0FBQSxRQUFBRyxHQUNBQyxFQUFBSixHQUFBLFFBQUFLLEdBR0E1QyxFQUFBLG1CQUFBdUMsR0FBQSxRQUFB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LEdBQ0FwQixVQUFBLHdCQUNBSCxZQUFBLHNCQUNBQyxXQUFBLHNCQUNBdUMsaUJBQUEsT0FDQUMsbUJBQUEsVUFDQXZDLHFCQUFBLHNCQUNBYSxVQUdBUSxNQUFBLEdBQ0FwQixVQUFBLHdCQUNBSCxZQUFBLHNCQUNBQyxXQUFBLHNCQUNBdUMsaUJBQUEsT0FDQUMsbUJBQUEsVUFDQXZDLHFCQUFBLHNCQUNBYSxXQU9BbEIsSUFFQXhGLE1BQUEsRUFDQStFLE1BQUEsR0FDQWtDLFVBQUEsR0FDQUMsTUFBQSxLQUdBbEgsTUFBQSxFQUNBK0UsTUFBQSxHQUNBa0MsVUFBQSxHQUNBQyxNQUFBLEtBS0FsRixJQThnQkEsT0FGQVYiLCJmaWxlIjoiYnVuZGxlLmpzIiwic291cmNlc0NvbnRlbnQiOlsiLyogIEdvYWxzIHRvZGF5XG5cbk1ham9yIHRoaW5ncyBsZWZ0IHRvIGRvOlxuICA0LiBBcHAgY29tcGxldGUgLSBjaGVjayBmb3IgZXJyb3JzXG5cblxuVGhpbmdzIGJlaW5nIGNvbXBsZXRlZCB0b2RheTpcblxuXG5cblxuKi9cblxuLy9tb2R1bGFyIHBhdHRlcm4gdXNpbmcgYSBzaWYgcmV2ZWFsaW5nIHB1YmxpYyBtZXRob2RzIHRvIHRoZSBnbG9iYWwgc2NvcGVcbiAgLy9cbihmdW5jdGlvbigpIHtcbiAgLy9hc3NpZ25pbmcgc29tZSB1c2VmdWwgdmFyaWFibGVzXG5cdHZhciBjYW52YXNXaWR0aCA9IDgwMCwgY2FudmFzSGVpZ2h0ID0gNTAwO1xuXHR2YXIgY3R4ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2dlbmVyYXRlZC1jaGFydCcpLmdldENvbnRleHQoJzJkJyk7XG5cdHZhciBuZXdDaGFydCwgZGF0YTtcblxuICAvKiBSZWdleCBQYXR0ZXJucyAqL1xuICB2YXIgZHNQYXR0ZXJuID0gLyhcXGQrKCwpKlxccyopKy9naTtcbiAgZGVmYXVsdExhYmVscyA9IFsnYSwnLCAnYicsICdjJywgJ2QnLCAnZScsICdmJywgJ2cnLCAnaCcsICdpJywgJ2onLCAnaycsICdsJywgJ20nLCAnbicsICdvJywgJ3AnLCAncScsICdyJywgJ3MnLCAndCcsICd1JywgJ3YnLCAneCcsICd5JywgJ3onXTtcbiAgdmFyIGF1dG9MYWJlbHM7XG5cbiAgdmFyIGdyYXBodHlwZSA9ICdMaW5lJzsgLy8gdGhlIGRlZmF1bHQgZ3JhcGggdHlwZVxuICB2YXIgbG9uZ2VzdEFyciA9IDA7XG5cbiAgdmFyIENvbmZpZ0RlZmF1bHRzID0ge1xuICAgIEdyYXBoOiAnUmFkYXInLFxuICAgIGRhdGFzZXRzQWxsb3dlZDogOVxuICAgIC8vLi4uXG4gIH07XG5cbiAgdmFyIG9wdGlvbnNBcnIgPSBbXTtcblxuICB2YXIgZXJyb3JNZXNzYWdlcyA9IHtcbiAgICBlbXB0eTogJ3NvcnJ5LCB0aGUgZGF0YWZpZWxkcyBjYW4gbm90IGJlIGVtcHR5LCB5b3UgY2FuIHJlbW92ZSB0aGVtIGlmIG5vdCBuZWNjZXNhcnknLFxuICAgIHdyb25nOiAnc29ycnksIHRoZSBkYXRhZmllbGRzIGFjY2VwdCBvbmx5IG51bWJlcnMgc2VwZXJhdGVkIGJ5IGEgc2luZ2xlIGNvbW1hJyxcbiAgICBsYWJlbDogJ3NvcnJ5LCBub3QgZW5vdWdoIGxhYmVscyBmb3IgdGhlIGRhdGFzZXRzJyxcbiAgICBjb2xvcjogJ3NvcnJ5LCBwbGVhc2Ugc2V0IGNvbG9ycyBmb3IgZWFjaCBkYXRhIHNldCdcbiAgfTtcblxuICAvL3NldHRpbmcgY2hhcnQgZ2xvYmFsIGRlZmF1bHQgb3B0aW9uc1xuICBDaGFydC5kZWZhdWx0cy5nbG9iYWwucmVzcG9uc2l2ZT0gZmFsc2U7XG4gIENoYXJ0LmRlZmF1bHRzLmdsb2JhbC5vbkFuaW1hdGlvbkNvbXBsZXRlPSBjYW52YXNUb0ltYWdlO1xuICAvL1xuXG4gIC8vY2FjaGUgSlF1ZXJ5IERPTSBlbGVtZW50c1xuICB2YXIgJHZpZXcxICAgICAgPSAkKCcjdHlwZXZpZXcxJyksXG4gICAgICAkdmlldzIgICAgICA9ICQoJyN0eXBldmlldzInKTtcblxuICB2YXIgJHdpbmRvdyAgICAgPSAkKCd3aW5kb3cnKSxcbiAgICAgICRzdWJtaXREYXRhID0gJCgnI3N1Ym1pdC1kYXRhJyksXG4gICAgICAkZGF0YVNldDEgICA9ICQoJyNkYXRhc2V0MScpLFxuICAgICAgJGRhdGFTZXQyICAgPSAkKCcjZGF0YXNldDInKSxcbiAgICAgICR4bGFiZWxzICAgID0gJCgnI3hsYWJlbHMnKSxcbiAgICAgICRkYXRhc2V0cyAgID0gJCgnI2RhdGFzZXRzJyk7XG4gIC8vYWRkLCByZW1vdmUgZGF0YXNldCBsaW5rc1xuICB2YXIgJGFkZERhdGFCdG4gPSAkKCcjYWRkLWRzJyk7XG5cdHZhciAkcm1EYXRhQnRuICA9ICQoJyNybS1kcycpO1xuICB2YXIgJG9wdGlvbnNDb250YWluZXIgPSAkKCcjc3dpdGNoLW9wdGlvbnMnKTtcblxuICAvLyBUaGUgdHlwZSBvZiBjaGFydCBjbGlja2VkIGFuZCBkaXNwbGF5IG9uIHRoZSB1c2VyIHNjcmVlblxuICB2YXIgJGNoYXJ0VHlwZUNsaWNrZWQgPSBcIlwiO1xuXG4gIC8vVGhpcyBpcyB0aGUgZmlyc3QgZGF0YSB0ZW1wbGF0ZSBmb3IgTGluZSwgQmFyLCBSYWRhciBjaGFydHNcblx0dmFyIHRlbXBsYXRlRGF0YSA9IHtcblx0ICAgIGxhYmVsczogWydsYWJlbDEnLCAnbGFiZWwyJywgJ2xhYmVsMycsICdsYWJlbDQnLCAnbGFiZWw1JywgJ2xhYmVsNiddLFxuXHQgICAgZGF0YXNldHM6IFtcblx0ICAgICAgICB7XG5cdCAgICAgICAgICBsYWJlbDogJycsXG4gICAgICAgICAgICBmaWxsQ29sb3I6IFwicmdiYSgyMjAsMjIwLDIyMCwwLjIpXCIsXG4gICAgICAgICAgICBzdHJva2VDb2xvcjogXCJyZ2JhKDIyMCwyMjAsMjIwLDEpXCIsXG4gICAgICAgICAgICBwb2ludENvbG9yOiBcInJnYmEoMjIwLDIyMCwyMjAsMSlcIixcbiAgICAgICAgICAgIHBvaW50U3Ryb2tlQ29sb3I6IFwiI2ZmZlwiLFxuICAgICAgICAgICAgcG9pbnRIaWdobGlnaHRGaWxsOiBcIiMyZWNjNzFcIixcbiAgICAgICAgICAgIHBvaW50SGlnaGxpZ2h0U3Ryb2tlOiBcInJnYmEoMjIwLDIyMCwyMjAsMSlcIixcbiAgICAgICAgICAgIGRhdGE6IFtdXG5cdCAgICAgICAgfSxcblx0ICAgICAgICB7XG4gICAgICAgICAgICBsYWJlbDogXCJcIixcbiAgICAgICAgICAgIGZpbGxDb2xvcjogXCJyZ2JhKDE1MSwxODcsMjA1LDAuMilcIixcbiAgICAgICAgICAgIHN0cm9rZUNvbG9yOiBcInJnYmEoMTUxLDE4NywyMDUsMSlcIixcbiAgICAgICAgICAgIHBvaW50Q29sb3I6IFwicmdiYSgxNTEsMTg3LDIwNSwxKVwiLFxuICAgICAgICAgICAgcG9pbnRTdHJva2VDb2xvcjogXCIjZmZmXCIsXG4gICAgICAgICAgICBwb2ludEhpZ2hsaWdodEZpbGw6IFwiIzJlY2M3MVwiLFxuICAgICAgICAgICAgcG9pbnRIaWdobGlnaHRTdHJva2U6IFwicmdiYSgxNTEsMTg3LDIwNSwxKVwiLFxuICAgICAgICAgICAgZGF0YTogW11cblx0ICAgICAgICB9XG5cdCAgICBdXG5cdH07XG4gIC8vbm90ZTogdGVtcGxhdGVEYXRhWydkYXRhc2V0cyddW2ldWydkYXRhJ10gLy90ZW1wbGF0ZURhdGFbJ2xhYmVscyddO1xuXG4gIC8vIFRoaXMgaXMgdGhlIHNlY29uZCB0eXBlIG9mIGRhdGEgdGVtcGxhdGUgZm9yIFBpZSwgRG9udXQsIGFuZCBQb2xhciBjaGFydHNcbiAgdmFyIHRlbXBsYXRlRGF0YTIgPSBbXG4gICAge1xuICAgICAgICB2YWx1ZTogMCxcbiAgICAgICAgY29sb3I6XCJcIixcbiAgICAgICAgaGlnaGxpZ2h0OiBcIlwiLFxuICAgICAgICBsYWJlbDogXCJcIlxuICAgIH0sXG4gICAge1xuICAgICAgICB2YWx1ZTogMCxcbiAgICAgICAgY29sb3I6XCJcIixcbiAgICAgICAgaGlnaGxpZ2h0OiBcIlwiLFxuICAgICAgICBsYWJlbDogXCJcIlxuICAgIH1cbiAgXTtcblxuXHQvL01hc3RlciBvcHRpb25zIHRlbXBsYXRlIGZvciBhbGwgdGhlIGNoYXJ0cyB0eXBlcyB1c2UgdGhpcyBvYmplY3Rcblx0dmFyIHRlbXBsYXRlT3B0aW9ucyA9IHt9O1xuXG4gIC8qIEhlbHBlciBGdW5jdGlvbnMgKi9cblxuICBmdW5jdGlvbiBpc051bWJlcihuKSB7XG4gICAgcmV0dXJuICFpc05hTihwYXJzZUZsb2F0KG4pKSAmJiBpc0Zpbml0ZShuKTtcbiAgfVxuXG4gIC8vIGRldGVybWluZXMgd2hhdCB0eXBlMSBjaGFydCBkYXRhc2V0IGlzIHRoZSBsb25nZXN0IGxlbmd0aFxuICBmdW5jdGlvbiBwcmVwQXV0b0xhYmVscygpIHtcbiAgICB2YXIgZGNBcnIgPSAkKCcjZGF0YXNldHMgLmZvcm0tY29udHJvbCcpO1xuXG4gICAgJC5lYWNoKGRjQXJyLCBmdW5jdGlvbihpbmRleCwgaXRlbSkge1xuICAgICAgdmFyIGl0ZW1BcnIgPSBpdGVtLnZhbHVlLnNwbGl0KCcsJyk7XG4gICAgICBpZiAoIGl0ZW1BcnIubGVuZ3RoID4gbG9uZ2VzdEFyciApIHtcbiAgICAgICAgbG9uZ2VzdEFyciA9IGl0ZW1BcnIubGVuZ3RoO1xuICAgICAgICAvL2NvbnNvbGUubG9nKCdsb25nZXN0IGxlbiBzbyBmYXIgaXM6ICcrIGxvbmdlc3RBcnIpO1xuICAgICAgfVxuICAgIH0pO1xuICAgIC8vIGdlbmVyYXRlcyBhIHNldCBvZiBhdXRvIGxhYmVscyBiYXNlZCBvbiB0aGUgbG9uZ2VzdCBkYXRlc2V0XG4gICAgICBhdXRvTGFiZWxzID0gZGVmYXVsdExhYmVscy5zbGljZSgwLCBsb25nZXN0QXJyKTtcbiAgfVxuXG4gIC8vIGNoYXJ0IGVycm9yIGhhbmRsaW5nLCBwcmV0dHkgYmFzaWMgZnVuY3Rpb25cbiAgZnVuY3Rpb24gcHJpbnRFcnJvck1lc3NhZ2VzKGVycm9yLCB2aWV3KSB7XG4gICAgdmFyIGVycm9yVGV4dCA9IGVycm9yTWVzc2FnZXNbJycrIGVycm9yXTtcbiAgICAkKCcuZXJyb3ItbWVzc2FnZScrIHZpZXcpLnRleHQoZXJyb3JUZXh0KS5yZW1vdmVDbGFzcygnaGlkZGVuJyk7IGNvbnNvbGUubG9nKCd5ZXMhJyk7XG4gIH1cblxuICBmdW5jdGlvbiBjbGVhckVycm9ycygpIHtcbiAgICAkKCcuZXJyb3ItbWVzc2FnZTEnKS5hZGRDbGFzcygnaGlkZGVuJyk7XG4gICAgJCgnLmVycm9yLW1lc3NhZ2UyJykuYWRkQ2xhc3MoJ2hpZGRlbicpO1xuICB9XG5cbiAgLy8gY2hhbmdlcyB0aGUgdGl0bGUgdGV4dFxuICBmdW5jdGlvbiBjaGFuZ2VUaXRsZSh0eXBlKSB7XG4gICAgdmFyICR0aXRsZSA9ICQoJy50eXBlLXRpdGxlJyk7XG4gICAgJHRpdGxlLmh0bWwodHlwZSk7XG4gIH1cblxuXG5cbiAgLyogQXBwIENvcmUgRnVuY3Rpb24gRmxvd1xuICAjXG4gICovXG5cblx0ZnVuY3Rpb24gYXBwSW5pdCgpIHtcbiAgICBtb2JpbGVOYXYoKTtcbiAgICBjb2xvclNlbGVjdG9yKCk7XG4gICAgaW5pdGlhbFJlbmRlcigpO1xuICAgIGV2ZW50QmluZGluZ3MoKTtcblx0fVxuXG5cdGZ1bmN0aW9uIGluaXRpYWxSZW5kZXIoKSB7XG5cdFx0bmV3Q2hhcnQgPSBuZXcgQ2hhcnQoY3R4KS5MaW5lKHRlbXBsYXRlRGF0YSwgdGVtcGxhdGVPcHRpb25zKTtcblx0fVxuXG4gIGZ1bmN0aW9uIGV2ZW50QmluZGluZ3MoKSB7XG4gICAgLy9iaW5kcyBldmVudCBoYW5kbGVycywgbWFpbmx5IHRoZSBzdWJtaXQgYnV0dG9uLlxuICAgICRzdWJtaXREYXRhLm9uKCdjbGljaycsIHJlbmRlck9uU3VibWl0KTtcbiAgICAkKCcjc3VibWl0LWRhdGEyJykub24oJ2NsaWNrJywgcmVuZGVyT25TdWJtaXQpO1xuXG4gICAgLy9hZGQgZHMsIHJlbW92ZSBkcyBldmVudHNcbiAgICAkYWRkRGF0YUJ0bi5vbignY2xpY2snLCBhZGREYXRhU2V0KTtcbiAgICAkcm1EYXRhQnRuLm9uKCdjbGljaycsIHJlbW92ZURhdGFTZXQpO1xuXG4gICAgLy9jaGFydHR5cGUgc3dpdGNoIGV2ZW50IGJpbmRpbmdzXG4gICAgJCgnc3Bhbi5jaGFydC10eXBlJykub24oJ2NsaWNrJywgY2hhcnRUeXBlQ29udHJvbGxlcik7XG4gICAgJCgnc2VsZWN0I21vYmlsZS1uYXYnKS5vbignY2hhbmdlJywgbW9iaWxlQ2hhcnRDdHJsKTtcblxuICAgIC8vY2hhcnR5cGUyIGFkZCByZW1vdmUgYmluZGluZ1xuICAgICQoJyNhZGQtc2xpY2UnKS5vbignY2xpY2snLCBhZGRTbGljZSk7XG4gICAgJCgnI3JtLXNsaWNlJykub24oJ2NsaWNrJywgcmVtb3ZlU2xpY2UpO1xuXG4gIH1cblxuICAvLyBNYWtlcyB0aGUgc2VsZWN0IG1vYmlsZSBuYXZpZ2F0aW9uIGFuZCBhcHBlbmRzIHRvIHRoZSBwYWdlXG4gIGZ1bmN0aW9uIG1vYmlsZU5hdigpIHtcblxuICAgICQoJzxzZWxlY3QgLz4nLCB7XG4gICAgICBcImlkXCI6IFwibW9iaWxlLW5hdlwiXG4gICAgfSkucHJlcGVuZFRvKCcjdHlwZS1zZWxlY3QnKTtcblxuICAgICQoJ3NwYW4uY2hhcnQtdHlwZSBhJykuZWFjaChmdW5jdGlvbigpIHtcbiAgICAgIHZhciAkZWwgPSAkKHRoaXMpO1xuICAgICAgJCgnPG9wdGlvbiAvPicsIHtcbiAgICAgICAgXCJ2YWx1ZVwiOiAkZWwuYXR0cihcImhyZWZcIiksXG4gICAgICAgIFwidGV4dFwiIDogJGVsLnRleHQoKVxuICAgICAgfSkuYXBwZW5kVG8oJyN0eXBlLXNlbGVjdCBzZWxlY3QnKTtcbiAgICB9KTtcbiAgfVxuXG4gIC8qXG4gICogZm4gdG8gY2hhbmdlZCB0aGUgdmlldyBkZXBlbmRpbmcgb24gd2hhdCBjaGFydCB0eXBlIGlzIHBpY2tlZFxuICAqL1xuICBmdW5jdGlvbiBjaGFydFR5cGVDb250cm9sbGVyKGUsIG10KSB7XG4gICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuXG4gICAgdmFyICRlbCA9ICQodGhpcyk7XG4gICAgdmFyIHdpbmRvd1dpZHRoID0gJCh3aW5kb3cpLndpZHRoKCk7XG4gICAgaWYgKCB3aW5kb3dXaWR0aCA+IDYwMCApIHtcbiAgICAgIGNvbnNvbGUubG9nKCR3aW5kb3cud2lkdGgoKSk7XG4gICAgICB2YXIgJGNoYXJ0VHlwZUNsaWNrZWQgPSAkZWwuYXR0cignZGF0YS10eXBlJykudG9TdHJpbmcoKTtcbiAgICB9XG5cbiAgLy8gSW5wdXQgbGFiZWxzIGNvbnRyb2xsZXJcbiAgICBpZiAoJGNoYXJ0VHlwZUNsaWNrZWQgPT09ICdsaW5lJyAgfHxcbiAgICAgICAgJGNoYXJ0VHlwZUNsaWNrZWQgPT09ICdiYXInICAgfHxcbiAgICAgICAgJGNoYXJ0VHlwZUNsaWNrZWQgPT09ICdyYWRhcicgfHxcbiAgICAgICAgbXQgPT09ICdMaW5lJyB8fFxuICAgICAgICBtdCA9PT0gJ0JhcicgIHx8XG4gICAgICAgIG10ID09PSAnUmFkYXInIClcbiAgICB7XG4gICAgICAkdmlldzIuYWRkQ2xhc3MoJ3R5cGUtaGlkZGVuJyk7XG4gICAgICAkdmlldzEucmVtb3ZlQ2xhc3MoJ3R5cGUtaGlkZGVuJyk7XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgJHZpZXcyLnJlbW92ZUNsYXNzKCd0eXBlLWhpZGRlbicpO1xuICAgICAgJHZpZXcxLmFkZENsYXNzKCd0eXBlLWhpZGRlbicpO1xuICAgICAgLy8gUmVtb3ZlcyBhbGwgYWRkZWQgZGF0YXNldHMgb24gY2hhcnQgdmlldyBjaGFuZ2VzXG4gICAgICB2YXIgbnVtU2V0c0FkZGVkID0gdGVtcGxhdGVEYXRhLmRhdGFzZXRzLmxlbmd0aCAtIDI7XG4gICAgICBmb3IgKHZhciBpID0gbnVtU2V0c0FkZGVkOyBpID4gMDsgLS1pKSB7XG4gICAgICAgIHJlbW92ZURhdGFTZXQoKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICAvL2NsZWFyIHRoZSBvcHRpb25zIG1vZHVsZVxuICAgICQoJ2RpdiNzd2l0Y2gtb3B0aW9ucycpLmVtcHR5KCk7XG5cbiAgICAvL2NoYW5nZSB0aGUgb3B0aW9uIHBhbmVsIHZpZXcuLi5cbiAgICBpZiAoJGNoYXJ0VHlwZUNsaWNrZWQgPT09ICdsaW5lJyB8fCBtdCA9PT0gJ0xpbmUnKSB7XG4gICAgICBjaGFuZ2VUaXRsZSgnTGluZSBHcmFwaCcpO1xuXG4gICAgICBvcHRpb25zQXJyID0gW1xuICAgICAgICB7b3B0aW9uTmFtZTogJ3NjYWxlU2hvd0dyaWRMaW5lcycsIG9wdGlvblRleHQ6ICdncmlkbGluZXMnLCBjaGVja2VkOiB0cnVlfSxcbiAgICAgICAge29wdGlvbk5hbWU6ICdiZXppZXJDdXJ2ZScsIG9wdGlvblRleHQ6ICdiZXppZXIgY3VydmVzJywgY2hlY2tlZDogdHJ1ZX0sXG4gICAgICAgIHtvcHRpb25OYW1lOiAnZGF0YXNldEZpbGwnLCBvcHRpb25UZXh0OiAnY29sb3IgZmlsbCcsIGNoZWNrZWQ6IHRydWV9LFxuICAgICAgICB7b3B0aW9uTmFtZTogJ3BvaW50RG90Jywgb3B0aW9uVGV4dDogJ2dyaWQgZG90cycsIGNoZWNrZWQ6IHRydWV9XG4gICAgICBdO1xuICAgICAgd3JpdGVPcHRpb25zKCk7XG4gICAgfVxuICAgIGVsc2UgaWYgKCRjaGFydFR5cGVDbGlja2VkID09PSAnYmFyJyB8fCBtdCA9PT0gJ0JhcicpIHtcbiAgICAgIGNoYW5nZVRpdGxlKCdCYXIgR3JhcGgnKTtcblxuICAgICAgb3B0aW9uc0FyciA9IFtcbiAgICAgICAge29wdGlvbk5hbWU6ICdzY2FsZVNob3dHcmlkTGluZXMnLCBvcHRpb25UZXh0OiAnZ3JpZGxpbmVzJywgY2hlY2tlZDogdHJ1ZX0sXG4gICAgICAgIHtvcHRpb25OYW1lOiAnc2NhbGVCZWdpbkF0WmVybycsIG9wdGlvblRleHQ6ICdzY2FsZSB6ZXJvJywgY2hlY2tlZDogdHJ1ZX1cbiAgICAgIF07XG4gICAgICB3cml0ZU9wdGlvbnMoKTtcbiAgICB9XG4gICAgZWxzZSBpZiAoJGNoYXJ0VHlwZUNsaWNrZWQgPT09ICdyYWRhcicgfHwgbXQgPT09ICdSYWRhcicpIHtcbiAgICAgIGNoYW5nZVRpdGxlKCdSYWRhciBHcmFwaCcpO1xuXG4gICAgICBvcHRpb25zQXJyID0gW1xuICAgICAgICB7b3B0aW9uTmFtZTogJ3NjYWxlU2hvd0xpbmUnLCBvcHRpb25UZXh0OiAnc2NhbGUgbGluZXMnLCBjaGVja2VkOiB0cnVlfSxcbiAgICAgICAge29wdGlvbk5hbWU6ICdhbmdsZVNob3dMaW5lT3V0Jywgb3B0aW9uVGV4dDogJ2FuZ2xlIGxpbmVzJywgY2hlY2tlZDogdHJ1ZX0sXG4gICAgICAgIHtvcHRpb25OYW1lOiAnc2NhbGVTaG93TGFiZWxzJywgb3B0aW9uVGV4dDogJ3NjYWxlIGxhYmVscycsIGNoZWNrZWQ6IHRydWV9LFxuICAgICAgICB7b3B0aW9uTmFtZTogJ3BvaW50RG90Jywgb3B0aW9uVGV4dDogJ2RvdCBwb2ludHMnLCBjaGVja2VkOiB0cnVlfSxcbiAgICAgICAge29wdGlvbk5hbWU6ICdkYXRhc2V0U3Ryb2tlJywgb3B0aW9uVGV4dDogJ2RhdGFzZXQgc3Ryb2tlcycsIGNoZWNrZWQ6IHRydWV9LFxuICAgICAgICB7b3B0aW9uTmFtZTogJ2RhdGFzZXRGaWxsJywgb3B0aW9uVGV4dDogJ2RhdGFzZXQgZmlsbCcsIGNoZWNrZWQ6IHRydWV9XG4gICAgICBdO1xuICAgICAgd3JpdGVPcHRpb25zKCk7XG4gICAgfVxuICAgIGVsc2UgaWYgKCRjaGFydFR5cGVDbGlja2VkID09PSBcInBpZVwiIHx8IG10ID09PSBcIlBpZVwiIHx8XG4gICAgICAgICAgICAgICRjaGFydFR5cGVDbGlja2VkID09PSBcImRvbnV0XCIgfHwgbXQgPT09IFwiRG91Z2hudXRcIilcbiAgICB7XG4gICAgICBpZiAoJGNoYXJ0VHlwZUNsaWNrZWQgPT09IFwicGllXCIgfHwgbXQgPT09IFwiUGllXCIpIHtcbiAgICAgICAgY2hhbmdlVGl0bGUoJ1BpZSBHcmFwaCcpO1xuICAgICAgfVxuICAgICAgaWYgKCRjaGFydFR5cGVDbGlja2VkID09PSBcImRvbnV0XCIgfHwgbXQgPT09IFwiRG91Z2hudXRcIikgeyBjaGFuZ2VUaXRsZSgnRG91Z2hudXQgR3JhcGgnKTsgfVxuXG4gICAgICBvcHRpb25zQXJyID0gW1xuICAgICAgICB7b3B0aW9uTmFtZTogJ3NlZ21lbnRTaG93U3Ryb2tlJywgb3B0aW9uVGV4dDogJ3NlZ21lbnQgc3Ryb2tlJywgY2hlY2tlZDogdHJ1ZX0sXG4gICAgICAgIHtvcHRpb25OYW1lOiAnYW5pbWF0ZVJvdGF0ZScsIG9wdGlvblRleHQ6ICdhbmltYXRlIHJvdGF0ZScsIGNoZWNrZWQ6IGZhbHNlfSxcbiAgICAgICAge29wdGlvbk5hbWU6ICdhbmltYXRlU2NhbGUnLCBvcHRpb25UZXh0OiAnYW5pbWF0ZSBzY2FsZScsIGNoZWNrZWQ6IGZhbHNlfVxuICAgICAgXTtcbiAgICAgIHdyaXRlT3B0aW9ucygpO1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgIGNoYW5nZVRpdGxlKCdQb2xhciBHcmFwaCcpO1xuXG4gICAgICBvcHRpb25zQXJyID0gW1xuICAgICAgICB7b3B0aW9uTmFtZTogJ3NjYWxlU2hvd0xhYmVsQmFja2Ryb3AnLCBvcHRpb25UZXh0OiAnc2NhbGUgYmFja2Ryb3AnLCBjaGVja2VkOiB0cnVlfSxcbiAgICAgICAge29wdGlvbk5hbWU6ICdzY2FsZUJlZ2luQXRaZXJvJywgb3B0aW9uVGV4dDogJ3NjYWxlIHplcm8nLCBjaGVja2VkOiB0cnVlfSxcbiAgICAgICAge29wdGlvbk5hbWU6ICdzY2FsZVNob3dMaW5lJywgb3B0aW9uVGV4dDogJ3NjYWxlIGxpbmUnLCBjaGVja2VkOiB0cnVlfSxcbiAgICAgICAge29wdGlvbk5hbWU6ICdzZWdtZW50U2hvd1N0cm9rZScsIG9wdGlvblRleHQ6ICdzZWdtZW50IHN0cm9rZScsIGNoZWNrZWQ6IHRydWV9LFxuICAgICAgICB7b3B0aW9uTmFtZTogJ2FuaW1hdGVSb3RhdGUnLCBvcHRpb25UZXh0OiAnYW5pbWF0ZSByb3RhdGUnLCBjaGVja2VkOiBmYWxzZX0sXG4gICAgICAgIHtvcHRpb25OYW1lOiAnYW5pbWF0ZVNjYWxlJywgb3B0aW9uVGV4dDogJ2FuaW1hdGUgc2NhbGUnLCBjaGVja2VkOiBmYWxzZX1cbiAgICAgIF07XG4gICAgICB3cml0ZU9wdGlvbnMoKTtcbiAgICB9XG5cbiAgICAvLyBzZXRzIHRoZSBjaGFydCB0eXBlIHRoZSBjb3JyZWN0IG9uZVxuICAgIGlmICgkY2hhcnRUeXBlQ2xpY2tlZCA9PT0gXCJwb2xhclwiIHx8IG10ID09PSBcIlBvbGFyXCIpIHtcbiAgICAgIGdyYXBodHlwZSA9IFwiUG9sYXJBcmVhXCI7XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgZ3JhcGh0eXBlID0gJGVsLnRleHQoKS50b1N0cmluZygpIHx8IG10O1xuICAgIH1cbiAgICAvL2NvbnNvbGUubG9nKCdjdXJyZW50IGdyYXBoIHR5cGUgaXMgJysgZ3JhcGh0eXBlKTtcbiAgfVxuXG4gIGZ1bmN0aW9uIG1vYmlsZUNoYXJ0Q3RybCgpIHtcbiAgICB2YXIgbW9iaWxlVHlwZSA9ICQoJ3NlbGVjdCBvcHRpb246c2VsZWN0ZWQnKS50ZXh0KCk7XG4gICAgY2hhcnRUeXBlQ29udHJvbGxlcihtb2JpbGVUeXBlKTtcbiAgfVxuXG4gIGZ1bmN0aW9uIHdyaXRlT3B0aW9ucygpIHtcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IG9wdGlvbnNBcnIubGVuZ3RoOyArK2kpIHtcbiAgICAgICQoJzxpbnB1dD48L2lucHV0PicpLmF0dHIoe1xuICAgICAgICAnY2xhc3MnOiAnc3dpdGNoJyxcbiAgICAgICAgJ2lkJyAgIDogb3B0aW9uc0FycltpXS5vcHRpb25OYW1lLFxuICAgICAgICAndHlwZScgOiAnY2hlY2tib3gnXG4gICAgICB9KS5wcm9wKCdjaGVja2VkJywgb3B0aW9uc0FycltpXS5jaGVja2VkKS5hcHBlbmRUbygkb3B0aW9uc0NvbnRhaW5lcik7XG4gICAgICAkKCc8bGFiZWw+PC9sYWJlbD4nKS5hdHRyKHtcbiAgICAgICAgXCJjbGFzc1wiOiBcInN3aXRjaFwiLFxuICAgICAgICBcImZvclwiICA6IG9wdGlvbnNBcnJbaV0ub3B0aW9uTmFtZSxcbiAgICAgIH0pLnRleHQob3B0aW9uc0FycltpXS5vcHRpb25UZXh0KS5hcHBlbmRUbygkb3B0aW9uc0NvbnRhaW5lcik7XG4gICAgfVxuICB9XG5cbiAgZnVuY3Rpb24gY29sb3JTZWxlY3RvcigpIHtcbiAgXHQkKFwiLmNvbG9yLXNlbGVjdFwiKS5zcGVjdHJ1bSh7XG4gIFx0ICAgIHNob3dQYWxldHRlT25seTogdHJ1ZSxcbiAgXHQgICAgc2hvd1BhbGV0dGU6dHJ1ZSxcbiAgXHQgICAgY29sb3I6J3JnYmEoMjU1LCAyNTUsIDI1NSwgLjUpJyxcbiAgXHQgICAgcGFsZXR0ZTogW1xuICBcdCAgICAgICAgWydyZ2JhKDU3LCAxMDYsIDE3NywgMSknLFxuICAgICAgICAgICAgJ3JnYmEoMjE4LCAxMjQsIDQ4LCAxKScsXG4gICAgICAgICAgICAncmdiYSg2MiwgMTUwLCA4MSwgMSknLFxuICBcdCAgICAgICAgJ3JnYmEoMjA0LCAzNywgNDEsIDEpJyxcbiAgICAgICAgICAgICdyZ2JhKDgzLCA4MSwgODQsIDEpJyxcbiAgICAgICAgICAgICdyZ2JhKDEwNywgNzYsIDE1NCwgMSknLFxuICAgICAgICAgICAgJ3JnYmEoMTQ2LCAzNiwgNDAsIDEpJyxcbiAgICAgICAgICAgICdyZ2JhKDE0OCwgMTM5LCA2MSwgMSknXSxcblxuICAgICAgICAgIFsncmdiYSgxMDIsMTk0LDE2NSwgMSknLFxuICAgICAgICAgICdyZ2JhKDI1MiwxNDEsOTgsIDEpJyxcbiAgICAgICAgICAncmdiYSgxNDEsMTYwLDIwMywgMSknLFxuICAgICAgICAgICdyZ2JhKDIzMSwxMzgsMTk1LCAxKScsXG4gICAgICAgICAgJ3JnYigxNjYsMjE2LDg0LCAxKScsXG4gICAgICAgICAgJ3JnYmEoMjU1LDIxNyw0NywgMSknLFxuICAgICAgICAgICdyZ2JhKDIyOSwxOTYsMTQ4LCAxKScsXG4gICAgICAgICAgJ3JnYmEoMTc5LDE3OSwxNzksIDEpJ11cbiAgXHQgICAgXVxuICBcdH0pO1xuICAgICAgJCgnLmNvbG9yLXNlbGVjdCcpLnJlbW92ZUNsYXNzKCdjb2xvci1zZWxlY3QnKS5hZGRDbGFzcygnY29sb3ItaW5pdGlhbGl6ZScpO1xuICB9XG5cblx0ZnVuY3Rpb24gcmVuZGVyT25TdWJtaXQoKSB7XG4gICAgLy9hdHRlbXB0cyB0byBjbGVhciB0aGUgY2FudmFzIGFzIHRoZXJlIGFyZSBtYW55IGdsaXRjaGVzIG9uIHJlcGVhdGVkIHJlbmRlcmluZ1xuICBcdGN0eC5jbGVhclJlY3QoMCwgMCwgY2FudmFzV2lkdGgsIGNhbnZhc0hlaWdodCk7XG4gICAgaWYgKG5ld0NoYXJ0KSB7XG4gICAgbmV3Q2hhcnQuY2xlYXIoKS5kZXN0cm95KCk7XG4gICAgfVxuXG4gICAgLy9jbGVhciBlcnJvciBtZXNzYWdlcyBmcm9tIHByZXZpb3VzIHJvdW5kc1xuICAgIGNsZWFyRXJyb3JzKCk7XG5cbiAgICAvL3ByZXBhcmUgYXV0byBsYWJlbHMgaWYgdGhlIGZpZWxkIGlzIGVtcHR5XG4gICAgcHJlcEF1dG9MYWJlbHMoKTtcblxuICAgIC8vc2V0IHRoZSBjaGFydCBkYXRhIHRvIG5ldyB2YWx1ZXMgYW5kIHJlLXJlbmRlcnMgdGhlIGNhbnZhc1xuICAgIC8vc2V0Q2hhcnREYXRhKCk7XG4gICAgZ3JhcGh0eXBlID09PSBcIkxpbmVcInx8XG4gICAgZ3JhcGh0eXBlID09PSBcIkJhclwifHxcbiAgICBncmFwaHR5cGUgPT09IFwiUmFkYXJcIiA/IHNldENoYXJ0RGF0YSgpIDogc2V0Q2hhcnREYXRhMigpO1xuXG4gICAgaWYgKGdyYXBodHlwZSA9PT0gXCJMaW5lXCIgfHwgXCJCYXJcIiB8fCBcIlJhZGFyXCIpIHtcbiAgICAgIC8vbmV3Q2hhcnQuY2xlYXIoKS5kZXN0cm95KCk7XG5cdFx0ICBuZXdDaGFydCA9IG5ldyBDaGFydChjdHgpW2dyYXBodHlwZV0oIHRlbXBsYXRlRGF0YSwgdGVtcGxhdGVPcHRpb25zICk7XG4gICAgfVxuICAgIGlmIChncmFwaHR5cGUgPT09IFwiUGllXCIgfHwgXCJEb251dFwiIHx8IFwiUG9sYXJBcmVhXCIpIHtcbiAgICAgIC8vbmV3Q2hhcnQuY2xlYXIoKS5kZXN0cm95KCk7XG5cdFx0ICBuZXdDaGFydCA9IG5ldyBDaGFydChjdHgpW2dyYXBodHlwZV0oIHRlbXBsYXRlRGF0YTIsIHRlbXBsYXRlT3B0aW9ucyApO1xuICAgIH1cbiAgfVxuXG4gIC8vIFNldHMgdGhlIG1haW4gZGF0YSB2YWx1ZXMgZm9yIHJlbmRlck9uU3VibWl0XG5cdGZ1bmN0aW9uIHNldENoYXJ0RGF0YSgpIHtcbiAgICAvKiBBY3Rpb24gUGxhblxuICAgICAqXG4gICAgKi9cbiAgICBjb25zb2xlLmxvZygnc2V0dGluZyBjaGFydCB0eXBlIDEnKTtcbiAgICAvL3NldHMgdGhlIGNvbG9yIG9mIGVhY2ggZGF0YXNldCB0byB0aGUgdXNlciBjaG9zZW4gY29sb3JcbiAgICAgIHZhciAkc2VsZWN0ZWRDb2xvcnMgPSAkKCcjdHlwZXZpZXcxIC5jb2xvci1pbml0aWFsaXplJyk7XG5cbiAgICAgICQuZWFjaCgkc2VsZWN0ZWRDb2xvcnMsIGZ1bmN0aW9uKGluZGV4LCBpdGVtKSB7XG4gICAgICAgIHZhciB0dGVtcCA9IGl0ZW0udmFsdWU7XG4gICAgICAvLyB0aHJvdyBhbiBlcnJvciBpZiB0aGUgY29sb3IgaXMgbm90IHNldFxuICAgICAgICBpZiAodHRlbXAgPT09IFwiXCIpIHtcbiAgICAgICAgICBwcmludEVycm9yTWVzc2FnZXMoJ2NvbG9yJywgMSk7XG4gICAgICAgICAgLy90aHJvdyBuZXcgRXJyb3IoJ2Vycm9yIGlucHV0Jyk7XG4gICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAvLyBzZXRzIHRoZSBjb2xvciBkYXRhIGluIHRoZSB0ZW1wbGF0ZSBvYmplY3RcbiAgICAgICAgdGVtcGxhdGVEYXRhLmRhdGFzZXRzW2luZGV4XS5zdHJva2VDb2xvciA9IHR0ZW1wO1xuICAgICAgICB0ZW1wbGF0ZURhdGEuZGF0YXNldHNbaW5kZXhdLnBvaW50Q29sb3IgPSB0dGVtcDtcbiAgICAgICAgdGVtcGxhdGVEYXRhLmRhdGFzZXRzW2luZGV4XS5wb2ludEhpZ2hsaWdodFN0cm9rZSA9IHR0ZW1wO1xuICAgICAgLy8gbGlnaHRlbnMgdGhlIGNvbG9yIGZvciB0aGUgZmlsbFxuICAgICAgICB0dGVtcCA9ICdyZ2JhJysgdHRlbXAuc2xpY2UoMywgdHRlbXAubGVuZ3RoIC0gMSkgKyAnLCAwLjIpJztcbiAgICAgICAgdGVtcGxhdGVEYXRhLmRhdGFzZXRzW2luZGV4XS5maWxsQ29sb3IgPSB0dGVtcDtcbiAgICAgIH0pO1xuXG4gICAgLy8gZ3JhYnMgdGhlIHVzZXIgZW50ZXJlZCBsYWJlbHMgYW5kIG1vZGlmaWVzIHRoZSB0ZW1wbGF0ZURhdGEgb2JqZWN0XG4gICAgICB2YXIgeGxhYmVsc0FyciAgPSAkeGxhYmVscy52YWwoKS5zcGxpdChcIixcIik7XG4gICAgICBjb25zb2xlLmxvZyh4bGFiZWxzQXJyLmxlbmd0aCsgXCIgXCIrIGxvbmdlc3RBcnIpO1xuXG4gICAgICBpZiAoICR4bGFiZWxzLnZhbCgpID09PSBcIlwiIHx8IHhsYWJlbHNBcnIubGVuZ3RoID09PSAwICkge1xuICAgICAgICAvL2NvbnNvbGUubG9nKCd3cml0aW5nIGF1dG9sYWJlbHMgaW50byBkYXRhIG9iamVjdCcpO1xuICAgICAgICB0ZW1wbGF0ZURhdGEubGFiZWxzID0gYXV0b0xhYmVscztcbiAgICAgIH1cbiAgICAgIGVsc2UgaWYgKCB4bGFiZWxzQXJyLmxlbmd0aCA8IGxvbmdlc3RBcnIgJiYgeGxhYmVsc0Fyci5sZW5ndGggIT09IDAgKSB7XG4gICAgICAgIHByaW50RXJyb3JNZXNzYWdlcygnbGFiZWwnLCAxKTtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgICAvL3Rocm93IG5ldyBFcnJvcignZXJyb3I6IG5vdCBlbm91Z2ggbGFiZWxzJyk7XG4gICAgICB9XG4gICAgICBlbHNlIHtcbiAgICAgICAgdGVtcGxhdGVEYXRhLmxhYmVscyA9IHhsYWJlbHNBcnI7XG4gICAgICB9XG5cbiAgICAvLyBnZXQgdGhlIGRhdGFzZXQgaW5wdXRzIGFuZCBtb2RpZmllcyB0aGUgdGVtcGxhdGVPYmplY3QgZm9yIGVhY2ggdXNlciBpbnB1dFxuICAgICAgdmFyIGRjQXJyID0gJCgnI2RhdGFzZXRzIC5mb3JtLWNvbnRyb2wnKTtcbiAgICAgICQuZWFjaChkY0FyciwgZnVuY3Rpb24oaW5kZXgsIGl0ZW0pIHtcbiAgICAgICAgdmFyIGN1ckl0ZW0gPSAoaXRlbS52YWx1ZSkuc3BsaXQoJywnKS5tYXAoZnVuY3Rpb24oaXRlbSkge1xuICAgICAgICAgIHJldHVybiBwYXJzZUludChpdGVtLCAxMCk7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIC8vbWFraW5nIHN1cmUgYWxsIGl0ZW1zIGFyZSBudW1lcmljYWw6XG4gICAgICAgIGN1ckl0ZW0uZm9yRWFjaChmdW5jdGlvbihlbCwgaSwgYXJyKSB7XG4gICAgICAgICAgaWYoICEoaXNOdW1iZXIoZWwpKSApIHtcbiAgICAgICAgICAgIC8vY29uc29sZS5sb2coaSsgJyBub3QgYSBudW1iZXInKTtcbiAgICAgICAgICAgIHByaW50RXJyb3JNZXNzYWdlcygnd3JvbmcnLCAxKTtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcImlucHV0IGZvcm1hdCBlcnJvciFcIik7XG4gICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgICAgdGVtcGxhdGVEYXRhLmRhdGFzZXRzW2luZGV4XS5kYXRhID0gY3VySXRlbTtcbiAgICAgIH0pO1xuXG4gICAgICAvL3NldHRpbmcgdXAgdGhlIG9wdGlvbnMgZm9yIGVhY2ggZ3JhcGggdHlwZS5cbiAgICAgIHNldE9wdGlvbnMoKTtcblx0fVxuXG4gIGZ1bmN0aW9uIHNldENoYXJ0RGF0YTIoKSB7XG5cbiAgICBjb25zb2xlLmxvZygnc2V0dGluZyBjaGFydCB0eXBlIDInKTtcblxuICAgIHZhciAkc2xpY2VzID0gJCgnLmRhdGEtc2xpY2VzJyk7XG4gICAgLy92YXIgJGNvbG9ycyA9ICQoJyN0eXBldmlldzEgLmNvbG9yLWluaXRpYWxpemUnKTtcblxuICAgICQuZWFjaCgkc2xpY2VzLCBmdW5jdGlvbihpbmRleCwgaXRlbSkge1xuICAgICAgdmFyIGxhYmVsVmFsID0gJChpdGVtKS5maW5kKCcubGFiZWxzJykudmFsKCk7XG4gICAgICB2YXIgZGF0YVZhbCA9ICQoaXRlbSkuZmluZCgnLnNsaWNlLWRhdGEnKS52YWwoKTtcbiAgICAgIHZhciBjb2xvclZhbCA9ICQoaXRlbSkuZmluZCgnLmNvbG9yLWluaXRpYWxpemUnKS52YWwoKS50b1N0cmluZygpO1xuXG4gICAgICBpZiAobGFiZWxWYWwgPT09IFwiXCIgfHwgZGF0YVZhbCA9PT0gXCJcIikge1xuICAgICAgICBwcmludEVycm9yTWVzc2FnZXMoJ2VtcHR5JywgMik7XG4gICAgICAgIC8vdGhyb3cgbmV3IEVycm9yKCdmaWVsZHMgZW1wdHknKTtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgICAgaWYgKGNvbG9yVmFsID09PSBcIlwiKSB7XG4gICAgICAgIHByaW50RXJyb3JNZXNzYWdlcygnY29sb3InLCAyKTtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuXG4gICAgICB0ZW1wbGF0ZURhdGEyW2luZGV4XS52YWx1ZSA9IHBhcnNlSW50KGRhdGFWYWwpO1xuICAgICAgdGVtcGxhdGVEYXRhMltpbmRleF0uY29sb3IgPSBjb2xvclZhbDtcbiAgICAgIHRlbXBsYXRlRGF0YTJbaW5kZXhdLmhpZ2hsaWdodCA9IGNvbG9yVmFsO1xuICAgICAgdGVtcGxhdGVEYXRhMltpbmRleF0ubGFiZWwgPSBsYWJlbFZhbDtcblxuICAgICAgLy9jb25zb2xlLmxvZyh0ZW1wbGF0ZURhdGEyKTtcbiAgICB9KTtcblxuICAgIHNldE9wdGlvbnMoKTtcbiAgfVxuXG4gIGZ1bmN0aW9uIHNldE9wdGlvbnMoKSB7XG5cbiAgLy9DaGFydHR5cGUgTGluZSBvcHRpb25zXG4gICAgY3VycmVudFBhZ2VPcHRpb25zID0gJCgnW3R5cGU9Y2hlY2tib3hdJyk7XG5cbiAgICAkLmVhY2goY3VycmVudFBhZ2VPcHRpb25zLCBmdW5jdGlvbihpbmRleCwgaXRlbSkge1xuICAgICAgY29uc29sZS5sb2coIGl0ZW0uaWQgKTtcbiAgICAgIHRlbXBsYXRlT3B0aW9uc1tpdGVtLmlkXSA9IGl0ZW0uY2hlY2tlZDtcbiAgICAgIGNvbnNvbGUubG9nKCBpdGVtLmNoZWNrZWQgKTtcbiAgICB9KTtcbiAgfVxuXG4vL2FkZCBkYXRhIHNsaWNlIGZvciBwaWUsIGRvdWdobnV0LCBwb2xhclxuICBmdW5jdGlvbiBhZGRTbGljZShldnQpIHtcbiAgICBldnQucHJldmVudERlZmF1bHQoKTtcbiAgICB2YXIgbmV3U2xpY2UgPSB7XG4gICAgICAgIHZhbHVlOiAwLFxuICAgICAgICBjb2xvcjpcIlwiLFxuICAgICAgICBoaWdobGlnaHQ6IFwiXCIsXG4gICAgICAgIGxhYmVsOiBcIlwiXG4gICAgfTtcbiAgICBpZih0ZW1wbGF0ZURhdGEyLmxlbmd0aCA+IDEyKSB7XG4gICAgICBjb25zb2xlLmxvZygnbGltaXQgcmVhY2hlZCcpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgIHRlbXBsYXRlRGF0YTIucHVzaChuZXdTbGljZSk7XG4gICAgICBjb25zb2xlLmxvZyh0ZW1wbGF0ZURhdGEyLmxlbmd0aCk7XG5cbiAgICAgIC8vYWRkaW5nIHRoZSBodG1sIGVsZW1lbnRzIHRvIHRoZSBwYWdlXG4gICAgICB2YXIgJGRpdiA9ICQoJzxkaXY+Jywge2NsYXNzOiBcImNvbnRhaW5lciBkYXRhLXNsaWNlcyBjb2wtNlwifSk7XG4gICAgICB2YXIgJGlucHV0TGFiZWwgPSAkKCc8aW5wdXQ+Jywge2NsYXNzOiBcImxhYmVscyBjb2wtMTBcIiwgdHlwZTogXCJ0ZXh0XCJ9KTtcbiAgICAgIHZhciAkaW5wdXREYXRhID0gJCgnPGlucHV0PicsIHtjbGFzczogXCJzbGljZS1kYXRhIGNvbC0xMFwiLCB0eXBlOiBcIm51bWJlclwifSk7XG4gICAgICB2YXIgJGNvbG9yID0gJCgnPGlucHV0PicsIHtjbGFzczogXCJjb2xvci1zZWxlY3QgY29sb3IyXCJ9KTtcblxuICAgICAgJGRpdi5hcHBlbmQoJGlucHV0TGFiZWwpLmFwcGVuZCgkaW5wdXREYXRhKS5hcHBlbmQoJGNvbG9yKTtcbiAgICAgICQoJy5kYXRhLXNsaWNlcycpLmxhc3QoKS5hZnRlcigkZGl2KTtcbiAgICAgIGNvbG9yU2VsZWN0b3IoKTtcbiAgICB9XG4gICAgZGF0YUxpbmtzU3R5bGUyKCk7XG4gIH1cblxuICBmdW5jdGlvbiByZW1vdmVTbGljZShldnQpIHtcbiAgICBldnQucHJldmVudERlZmF1bHQoKTtcbiAgICBpZih0ZW1wbGF0ZURhdGEyLmxlbmd0aCA8IDIpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICB0ZW1wbGF0ZURhdGEyLnBvcCgpOyBjb25zb2xlLmxvZyh0ZW1wbGF0ZURhdGEyLmxlbmd0aCk7XG4gICAgICAkKCcuZGF0YS1zbGljZXMnKS5sYXN0KCkucmVtb3ZlKCk7XG4gICAgfVxuICAgIGRhdGFMaW5rc1N0eWxlMigpO1xuICB9XG5cblxuICBmdW5jdGlvbiBhZGREYXRhU2V0KGV2dCkge1xuICAgIGV2dC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgIHZhciBkc0FyciA9IHRlbXBsYXRlRGF0YS5kYXRhc2V0cztcbiAgICB2YXIgbmV3RFMgPSB7XG4gICAgICAgICAgbGFiZWw6ICcnLFxuICAgICAgICAgIGZpbGxDb2xvcjogXCJyZ2JhKDIyMCwyMjAsMjIwLDAuMilcIixcbiAgICAgICAgICBzdHJva2VDb2xvcjogXCJyZ2JhKDIyMCwyMjAsMjIwLDEpXCIsXG4gICAgICAgICAgcG9pbnRDb2xvcjogXCJyZ2JhKDIyMCwyMjAsMjIwLDEpXCIsXG4gICAgICAgICAgcG9pbnRTdHJva2VDb2xvcjogXCIjZmZmXCIsXG4gICAgICAgICAgcG9pbnRIaWdobGlnaHRGaWxsOiBcIiNmZmZcIixcbiAgICAgICAgICBwb2ludEhpZ2hsaWdodFN0cm9rZTogXCJyZ2JhKDIyMCwyMjAsMjIwLDEpXCIsXG4gICAgICAgICAgZGF0YTogW11cbiAgICB9O1xuICAgIC8vaWYgdGhlIG51bWJlciBvZiBkYXRhc2V0cyBpcyBncmVhdGVyIHRoYW4gZGF0YXNldHNBbGxvd2VkLCBjYW4gbm90IGFkZFxuICAgIGlmKGRzQXJyLmxlbmd0aCA+PSBDb25maWdEZWZhdWx0cy5kYXRhc2V0c0FsbG93ZWQpIHtcbiAgICAgIC8vY29uc29sZS5sb2coJ2RhdGFzZXQgbGltaXQgcmVhY2hlZCwgY2FuIG5vdCBhZGQgYW5vdGhlciBzZXQnKyBkc0Fyci5sZW5ndGgpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIC8vZWxzZSBhZGQgYSBuZXcgZGF0YSBvYmplY3QgYXQgdGhlIGVuZCBvZiBkYXRhc2V0cyBvYmplY3RcbiAgICBlbHNlIHtcbiAgICAgIGRzQXJyLnB1c2gobmV3RFMpO1xuICAgICAgLy9Ob3cgYXBwZW5kIHRoZSBodG1sIGVsZW1lbnQgdG8gdGhlIHBhZ2UgdG8gYWxsb3cgdXNlciBlbnRyeVxuICAgICAgdmFyICRkYXRhSW5wdXREaXYgPSAkKCc8ZGl2PicsIHtpZDpcIlwiLCBjbGFzczogXCJjb250YWluZXIgYWZcIn0pO1xuICAgICAgdmFyICRkYXRhSW5wdXRFbCA9ICQoJzxpbnB1dCAvPicsIHtpZDogXCJcIiwgY2xhc3M6IFwiZm9ybS1jb250cm9sIGFkZGVkLWlucHV0c1wifSk7XG4gICAgICB2YXIgJGRhdGFDb2xvclNlbGVjdCA9ICQoJzxpbnB1dD4nLCB7Y2xhc3M6IFwiY29sb3Itc2VsZWN0IGNvbG9yMVwifSk7XG5cbiAgICAgICRkYXRhSW5wdXREaXYuYXBwZW5kKCRkYXRhSW5wdXRFbCkuYXBwZW5kKCRkYXRhQ29sb3JTZWxlY3QpO1xuICAgICAgJGRhdGFzZXRzLmFwcGVuZCgkZGF0YUlucHV0RGl2KTtcbiAgICAgIGNvbG9yU2VsZWN0b3IoKTtcbiAgICB9XG4gICAgZGF0YUxpbmtzU3R5bGUoKTtcbiAgfVxuXG4gIGZ1bmN0aW9uIHJlbW92ZURhdGFTZXQoZXZ0KSB7XG4gICAgaWYgKGV2dCkge1xuICAgICAgZXZ0LnByZXZlbnREZWZhdWx0KCk7XG4gICAgfVxuICAgIHZhciBkc0FyciA9IHRlbXBsYXRlRGF0YS5kYXRhc2V0cztcblxuICAgIGlmKGRzQXJyLmxlbmd0aCA8PSAyKSB7XG4gICAgICAvL2NvbnNvbGUubG9nKCdtdXN0IGhhdmUgYXQgbGVhc3QgdHdvIGRhdGFzZXRzJysgZHNBcnIubGVuZ3RoKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICBkc0Fyci5wb3AoKTtcbiAgICAgIC8vUmVtb3ZlIHRoZSBodG1sIGlucHV0IGVsZW1lbnRcbiAgICAgIHZhciAkbGFzdERhdGFJbnB1dHMgPSAkKCcjZGF0YXNldHMgZGl2LmNvbnRhaW5lcicpLmxhc3QoKTtcbiAgICAgICRsYXN0RGF0YUlucHV0cy5yZW1vdmUoKTtcbiAgICB9XG4gICAgZGF0YUxpbmtzU3R5bGUoKTtcbiAgfVxuXG4gIC8vdG9nZ2xlcyBoaWRlIGFuZCBzaG93IG9mIHJtLCBhZGQgbGlua3MgYWNjb3JkaW5nbHlcbiAgZnVuY3Rpb24gZGF0YUxpbmtzU3R5bGUoKSB7XG4gICAgdmFyIHRlbXBwID0gdGVtcGxhdGVEYXRhLmRhdGFzZXRzO1xuICAgIC8vMywgNCwgNSwgNiBib3RoIHNob3dcbiAgICBpZih0ZW1wcC5sZW5ndGggPiAyICYmIHRlbXBwLmxlbmd0aCA8IDkpIHtcbiAgICAgICRybURhdGFCdG4ucmVtb3ZlQ2xhc3MoJ2hpZGRlbicpO1xuICAgICAgJGFkZERhdGFCdG4ucmVtb3ZlQ2xhc3MoJ2hpZGRlbicpO1xuICAgIH1cbiAgICBpZih0ZW1wcC5sZW5ndGggPT09IDIpIHsgJHJtRGF0YUJ0bi5hZGRDbGFzcygnaGlkZGVuJyk7IH1cbiAgICBpZih0ZW1wcC5sZW5ndGggPT09IDkpIHsgJGFkZERhdGFCdG4uYWRkQ2xhc3MoJ2hpZGRlbicpOyB9XG4gIH1cblxuICBmdW5jdGlvbiBkYXRhTGlua3NTdHlsZTIoKSB7XG4gICAgdmFyICRybVNsaWNlID0gJCgnI3JtLXNsaWNlJyksXG4gICAgICAgICRhZGRTbGljZSA9ICQoJyNhZGQtc2xpY2UnKTtcblxuICAgIHZhciB0ZW1wcCA9IHRlbXBsYXRlRGF0YTI7XG4gICAgLy8gZnJvbSAyIC0gMTIsIGJvdGggc2hvd1xuICAgIGlmKHRlbXBwLmxlbmd0aCA+IDIgJiYgdGVtcHAubGVuZ3RoIDwgMTMpIHtcbiAgICAgICRybVNsaWNlLnJlbW92ZUNsYXNzKCdoaWRkZW4nKTtcbiAgICAgICRhZGRTbGljZS5yZW1vdmVDbGFzcygnaGlkZGVuJyk7XG4gICAgfVxuICAgIGlmKHRlbXBwLmxlbmd0aCA9PT0gMikgeyAkcm1TbGljZS5hZGRDbGFzcygnaGlkZGVuJyk7IH1cbiAgICBpZih0ZW1wcC5sZW5ndGggPT09IDEyKSB7ICRhZGRTbGljZS5hZGRDbGFzcygnaGlkZGVuJyk7IH1cbiAgfVxuXG4gIC8vIENvbnZlcnRzIGNhbnZhcyB0byBhbiBpbWFnZVxuICBmdW5jdGlvbiBjYW52YXNUb0ltYWdlKCkge1xuICAgICAgdmFyIGdyYXBoID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2dlbmVyYXRlZC1jaGFydCcpO1xuICAgICAgdmFyIGltYWdlID0gbmV3IEltYWdlKCk7XG4gICAgICBpbWFnZS5zcmMgPSBncmFwaC50b0RhdGFVUkwoXCJpbWFnZS9wbmdcIik7XG5cbiAgICAgIHZhciAkZG93bmxvYWQgPSAkKCc8YSBkb3dubG9hZD1cInNpbXBsZWNoYXJ0LnBuZ1wiPjwvYT4nKTtcbiAgICAgICRkb3dubG9hZC5hdHRyKCdocmVmJywgaW1hZ2Uuc3JjKTtcbiAgICAgICRkb3dubG9hZC5hcHBlbmQoaW1hZ2UpO1xuXG4gICAgICAkKCcjZ3JhcGgtb3V0cHV0JykuZW1wdHkoKS5hcHBlbmQoJGRvd25sb2FkKTtcbiAgfVxuXG5cdC8vSW5pdGlhdGVzIHRoZSBpbml0aWFsIGluc3RhbmNlIG9mIHRoZSBhcHBsaWNhdGlvbiwgZXZlbnQgYmluZGluZ3MsIGVjdC4uXG5cdGFwcEluaXQoKTtcblxuXHRyZXR1cm4ge1xuXHRcdC8vIEFueSBtZXRob2RzIHRvIGJlIHJldHVybmVkIGZvciBwdWJsaWMgY29uc3VtcHRpb24gYnkgb3RoZXIgcGFydHMgb2YgdGhlIEFwcFxuXG5cdH07XG5cbn0pKCk7XG4iXSwic291cmNlUm9vdCI6Ii9zb3VyY2UvIn0=
